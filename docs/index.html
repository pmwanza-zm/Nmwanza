<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UCT Benchmark â€” SDA TAP Lab / SpOC</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Barlow+Condensed:wght@300;400;600;700;900&family=Barlow:wght@300;400;500&display=swap');
:root{--bg:#040a0f;--bg2:#071018;--bg3:#0a1622;--accent:#00d4ff;--accent2:#00ff9d;--warn:#ff6b35;--danger:#ff2d55;--text:#c8e0f0;--muted:#4a6a85;--border:#0e2035;--glow:0 0 20px rgba(0,212,255,0.15)}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:'Barlow',sans-serif;font-weight:300;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,212,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,255,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.05) 2px,rgba(0,0,0,0.05) 4px);pointer-events:none;z-index:0}
nav{position:sticky;top:0;z-index:100;background:rgba(4,10,15,0.95);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;display:flex;align-items:center;height:56px}
.nav-logo{font-family:'Share Tech Mono',monospace;color:var(--accent);font-size:0.85rem;letter-spacing:0.15em;text-transform:uppercase;margin-right:auto;display:flex;align-items:center;gap:0.5rem}
.nav-logo::before{content:'â—ˆ';animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
.nav-tabs{display:flex;height:100%}
.nav-tab{font-family:'Barlow Condensed',sans-serif;font-weight:600;font-size:0.75rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--muted);padding:0 1.5rem;height:100%;display:flex;align-items:center;cursor:pointer;border-bottom:2px solid transparent;transition:all 0.2s;border:none;background:none}
.nav-tab:hover{color:var(--text)}
.nav-tab.active{color:var(--accent);border-bottom:2px solid var(--accent)}
.nav-badge{font-family:'Share Tech Mono',monospace;font-size:0.6rem;background:var(--accent);color:var(--bg);padding:1px 5px;border-radius:2px;margin-left:0.4rem}
.page{display:none;padding:2rem;position:relative;z-index:1}
.page.active{display:block;animation:fadeIn 0.3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.page-header{margin-bottom:2rem;display:flex;align-items:flex-end;gap:1rem;border-bottom:1px solid var(--border);padding-bottom:1.5rem}
.page-title{font-family:'Barlow Condensed',sans-serif;font-weight:900;font-size:2.5rem;letter-spacing:-0.02em;line-height:1;color:#fff}
.page-subtitle{font-family:'Share Tech Mono',monospace;font-size:0.75rem;color:var(--muted);letter-spacing:0.1em;margin-bottom:0.3rem}
.page-meta{font-family:'Share Tech Mono',monospace;font-size:0.7rem;color:var(--accent);letter-spacing:0.05em;margin-left:auto;text-align:right}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1px;background:var(--border);border:1px solid var(--border);margin-bottom:2rem}
.stat-card{background:var(--bg2);padding:1.5rem;position:relative;overflow:hidden;transition:background 0.2s}
.stat-card:hover{background:var(--bg3)}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent),transparent)}
.stat-label{font-family:'Share Tech Mono',monospace;font-size:0.65rem;color:var(--muted);letter-spacing:0.15em;text-transform:uppercase;margin-bottom:0.5rem}
.stat-value{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:2.5rem;color:#fff;line-height:1;letter-spacing:-0.02em}
.stat-unit{font-family:'Share Tech Mono',monospace;font-size:0.65rem;color:var(--accent);margin-top:0.3rem}
.stat-accent{color:var(--accent)}.stat-green{color:var(--accent2)}.stat-warn{color:var(--warn)}
.panels{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}
.panel{background:var(--bg2);border:1px solid var(--border);padding:1.5rem;position:relative}
.panel-title{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted);margin-bottom:1.25rem;display:flex;align-items:center;gap:0.5rem}
.panel-title::before{content:'';display:inline-block;width:6px;height:6px;background:var(--accent);transform:rotate(45deg)}
.event-list{display:flex;flex-direction:column;gap:0.5rem}
.event-row{display:flex;align-items:center;gap:0.75rem;padding:0.75rem;background:var(--bg3);border:1px solid var(--border);font-family:'Share Tech Mono',monospace;font-size:0.72rem;transition:border-color 0.2s}
.event-row:hover{border-color:var(--accent)}
.event-type{padding:2px 8px;font-size:0.6rem;letter-spacing:0.1em;font-weight:700;min-width:130px;text-align:center}
.et-TRACK_GAP{background:rgba(0,212,255,0.1);color:var(--accent);border:1px solid var(--accent)}
.et-SPARSE_OBJECT{background:rgba(0,255,157,0.1);color:var(--accent2);border:1px solid var(--accent2)}
.et-CONJUNCTION{background:rgba(255,107,53,0.1);color:var(--warn);border:1px solid var(--warn)}
.et-SINGLE_OBS_TRACK{background:rgba(255,45,85,0.1);color:var(--danger);border:1px solid var(--danger)}
.et-MANEUVER{background:rgba(255,215,0,0.1);color:#ffd700;border:1px solid #ffd700}
.event-sat{color:var(--accent);min-width:60px}
.event-time{color:var(--muted);flex:1}
.event-conf{background:var(--bg);padding:1px 6px;font-size:0.6rem;color:var(--accent2)}
#skyCanvas{width:100%;background:var(--bg);border:1px solid var(--border);cursor:crosshair;display:block}
.sky-controls{display:flex;gap:0.75rem;margin-bottom:1rem;flex-wrap:wrap;align-items:center}
.sky-select{font-family:'Share Tech Mono',monospace;font-size:0.72rem;background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:0.4rem 0.75rem;cursor:pointer;outline:none}
.sky-select:focus{border-color:var(--accent)}
.sky-legend{display:flex;gap:1rem;flex-wrap:wrap;margin-top:0.75rem}
.legend-item{display:flex;align-items:center;gap:0.4rem;font-family:'Share Tech Mono',monospace;font-size:0.65rem;color:var(--muted)}
.legend-dot{width:8px;height:8px;border-radius:50%}
.data-table-wrap{overflow-x:auto;max-height:400px;overflow-y:auto;border:1px solid var(--border)}
.data-table{width:100%;border-collapse:collapse;font-family:'Share Tech Mono',monospace;font-size:0.68rem}
.data-table th{background:var(--bg3);color:var(--accent);padding:0.6rem 0.75rem;text-align:left;letter-spacing:0.1em;text-transform:uppercase;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;white-space:nowrap}
.data-table td{padding:0.5rem 0.75rem;border-bottom:1px solid rgba(14,32,53,0.5);color:var(--text);white-space:nowrap}
.data-table tr:hover td{background:var(--bg3)}
.download-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-bottom:2rem}
.download-card{background:var(--bg2);border:1px solid var(--border);padding:1.25rem 1.5rem;display:flex;align-items:center;gap:1rem;cursor:pointer;text-decoration:none;transition:all 0.2s}
.download-card:hover{border-color:var(--accent);background:var(--bg3)}
.download-icon{font-size:1.5rem;min-width:2rem;text-align:center}
.download-name{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.9rem;color:#fff;letter-spacing:0.05em}
.download-meta{font-family:'Share Tech Mono',monospace;font-size:0.62rem;color:var(--muted);margin-top:0.2rem}
.protocol-box{background:var(--bg2);border:1px solid var(--border);border-left:3px solid var(--accent);padding:1.5rem;margin-bottom:1.5rem;font-family:'Share Tech Mono',monospace;font-size:0.72rem;line-height:1.8;color:var(--text)}
.protocol-step{display:flex;gap:1rem;margin-bottom:0.75rem;align-items:flex-start}
.step-num{color:var(--accent);min-width:1.5rem;font-weight:700}
.submit-form{background:var(--bg2);border:1px solid var(--border);padding:1.5rem;margin-bottom:2rem;display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:0.75rem;align-items:end}
.form-label{font-family:'Share Tech Mono',monospace;font-size:0.62rem;color:var(--muted);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:0.4rem;display:block}
.form-input{width:100%;background:var(--bg3);border:1px solid var(--border);color:var(--text);padding:0.5rem 0.75rem;font-family:'Share Tech Mono',monospace;font-size:0.72rem;outline:none;transition:border-color 0.2s}
.form-input:focus{border-color:var(--accent)}
.btn{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.8rem;letter-spacing:0.1em;text-transform:uppercase;padding:0.5rem 1.5rem;background:var(--accent);color:var(--bg);border:none;cursor:pointer;transition:all 0.2s;white-space:nowrap}
.btn:hover{background:#fff;box-shadow:var(--glow)}
.leaderboard-table{width:100%;border-collapse:collapse;font-family:'Share Tech Mono',monospace;font-size:0.72rem}
.leaderboard-table th{background:var(--bg3);color:var(--accent);padding:0.75rem 1rem;text-align:left;letter-spacing:0.1em;text-transform:uppercase;border-bottom:1px solid var(--border)}
.leaderboard-table td{padding:0.75rem 1rem;border-bottom:1px solid var(--border);color:var(--text)}
.leaderboard-table tr:first-child td{background:rgba(0,212,255,0.05)}
.rank-1{color:#ffd700;font-weight:700}.rank-2{color:#c0c0c0}.rank-3{color:#cd7f32}
.score-bar-wrap{background:var(--bg3);height:4px;width:80px;display:inline-block;vertical-align:middle;margin-left:0.5rem}
.score-bar{height:100%;background:var(--accent);transition:width 0.5s ease}
.split-train{background:rgba(0,212,255,0.1);color:var(--accent);padding:1px 6px;font-size:0.6rem;border:1px solid rgba(0,212,255,0.3)}
.split-test{background:rgba(0,255,157,0.1);color:var(--accent2);padding:1px 6px;font-size:0.6rem;border:1px solid rgba(0,255,157,0.3)}
.loading{text-align:center;padding:3rem;font-family:'Share Tech Mono',monospace;font-size:0.8rem;color:var(--muted)}
@media(max-width:768px){.panels{grid-template-columns:1fr}.submit-form{grid-template-columns:1fr 1fr}nav{padding:0 1rem}.page{padding:1rem}}
</style>
</head>
<body>
<nav>
  <div class="nav-logo">UCT Benchmark // SDA TAP Lab</div>
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="showPage('dashboard')">Dashboard</button>
    <button class="nav-tab" onclick="showPage('skymap')">Sky Map</button>
    <button class="nav-tab" onclick="showPage('explorer')">Data Explorer</button>
    <button class="nav-tab" onclick="showPage('leaderboard')">Leaderboard <span class="nav-badge">NEW</span></button>
  </div>
</nav>

<div id="page-dashboard" class="page active">
  <div class="page-header">
    <div>
      <div class="page-subtitle">SDA TAP LAB / SPOC â€” UCT BENCHMARK v1.0</div>
      <div class="page-title">Mission Overview</div>
    </div>
    <div class="page-meta">JAN 24â€“28 2026<br><span id="live-time"></span></div>
  </div>
  <div class="stats-grid">
    <div class="stat-card"><div class="stat-label">Total Observations</div><div class="stat-value stat-accent">22,450</div><div class="stat-unit">EO OPTICAL</div></div>
    <div class="stat-card"><div class="stat-label">Satellites Tracked</div><div class="stat-value">11</div><div class="stat-unit">LEO OBJECTS</div></div>
    <div class="stat-card"><div class="stat-label">Sensor Network</div><div class="stat-value stat-accent">59</div><div class="stat-unit">OPTICAL SENSORS</div></div>
    <div class="stat-card"><div class="stat-label">Tracks Identified</div><div class="stat-value">892</div><div class="stat-unit">ORBITAL PASSES</div></div>
    <div class="stat-card"><div class="stat-label">Labeled Events</div><div class="stat-value stat-warn">30</div><div class="stat-unit">GROUND TRUTH</div></div>
    <div class="stat-card"><div class="stat-label">Observation Window</div><div class="stat-value stat-green">5</div><div class="stat-unit">DAYS</div></div>
  </div>
  <div class="panels">
    <div class="panel"><div class="panel-title">Event Distribution</div><canvas id="eventChart" height="200"></canvas></div>
    <div class="panel"><div class="panel-title">Observations per Satellite</div><canvas id="satChart" height="200"></canvas></div>
  </div>
  <div class="panels">
    <div class="panel">
      <div class="panel-title">Train / Test Split</div>
      <canvas id="splitChart" height="160"></canvas>
      <div style="display:flex;gap:2rem;margin-top:1rem;font-family:'Share Tech Mono',monospace;font-size:0.7rem;">
        <div><span style="color:var(--accent)">â– </span> TRAIN 13,004 obs Jan 24â€“26</div>
        <div><span style="color:var(--accent2)">â– </span> TEST 9,446 obs Jan 27â€“28</div>
      </div>
    </div>
    <div class="panel"><div class="panel-title">Events per Satellite</div><canvas id="coverageChart" height="160"></canvas></div>
  </div>
  <div class="panel"><div class="panel-title">Ground Truth Events</div><div class="event-list" id="event-list-dash"></div></div>
</div>

<div id="page-skymap" class="page">
  <div class="page-header">
    <div><div class="page-subtitle">SENSOR FIELD OF VIEW</div><div class="page-title">Sky Map</div></div>
    <div class="page-meta" id="sky-info">SELECT A SATELLITE</div>
  </div>
  <div class="sky-controls">
    <select class="sky-select" id="sat-select" onchange="renderSkyMap()">
      <option value="all">All Satellites</option>
      <option value="39070">SAT 39070</option>
      <option value="39504">SAT 39504</option>
      <option value="42915">SAT 42915</option>
      <option value="27566">SAT 27566</option>
      <option value="22314">SAT 22314</option>
      <option value="23613">SAT 23613</option>
      <option value="32711">SAT 32711 â˜… sparse</option>
      <option value="40730">SAT 40730 â˜… sparse</option>
      <option value="24876">SAT 24876 â˜… sparse</option>
      <option value="19751">SAT 19751 â˜… sparse</option>
      <option value="39086">SAT 39086 â˜… sparse</option>
    </select>
    <select class="sky-select" id="coord-select" onchange="renderSkyMap()">
      <option value="azel">Azimuth / Elevation</option>
      <option value="radec">RA / Declination</option>
    </select>
    <select class="sky-select" id="split-select" onchange="renderSkyMap()">
      <option value="all">All Data</option>
      <option value="train">Train Only</option>
      <option value="test">Test Only</option>
    </select>
    <span style="font-family:'Share Tech Mono',monospace;font-size:0.65rem;color:var(--muted);margin-left:auto" id="point-count"></span>
  </div>
  <canvas id="skyCanvas"></canvas>
  <div class="sky-legend">
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent)"></div>Train obs</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent2)"></div>Test obs</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--warn);width:10px;height:10px;border-radius:2px"></div>Event</div>
    <div class="legend-item"><div class="legend-dot" style="background:#ffd700"></div>Maneuver</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--danger)"></div>Conjunction</div>
  </div>
</div>

<div id="page-explorer" class="page">
  <div class="page-header">
    <div><div class="page-subtitle">BENCHMARK DATASET â€” v1.0.0</div><div class="page-title">Data Explorer</div></div>
    <div class="page-meta">22,450 OBS | 30 EVENTS</div>
  </div>
  <div class="download-grid">
    <a class="download-card" href="https://raw.githubusercontent.com/pmwanza-zm/Nmwanza/master/benchmark/observations.csv" download>
      <div class="download-icon">â¬‡</div>
      <div><div class="download-name">observations.csv</div><div class="download-meta">22,450 rows Â· 3.6 MB</div></div>
    </a>
    <a class="download-card" href="https://raw.githubusercontent.com/pmwanza-zm/Nmwanza/master/benchmark/events.csv" download>
      <div class="download-icon">â¬‡</div>
      <div><div class="download-name">events.csv</div><div class="download-meta">30 rows Â· Ground Truth</div></div>
    </a>
    <a class="download-card" href="https://raw.githubusercontent.com/pmwanza-zm/Nmwanza/master/benchmark/splits.json" download>
      <div class="download-icon">â¬‡</div>
      <div><div class="download-name">splits.json</div><div class="download-meta">Train/test definitions</div></div>
    </a>
    <a class="download-card" href="https://raw.githubusercontent.com/pmwanza-zm/Nmwanza/master/benchmark/metadata.json" download>
      <div class="download-icon">â¬‡</div>
      <div><div class="download-name">metadata.json</div><div class="download-meta">Dataset card Â· Eval protocol</div></div>
    </a>
  </div>
  <div class="panel" style="margin-bottom:1.5rem">
    <div class="panel-title">Evaluation Protocol</div>
    <div class="protocol-box">
      <div class="protocol-step"><span class="step-num">01</span><span>Download observations.csv and splits.json</span></div>
      <div class="protocol-step"><span class="step-num">02</span><span>Train on rows where <strong style="color:var(--accent)">split = "train"</strong> (Jan 24â€“26, 13,004 obs)</span></div>
      <div class="protocol-step"><span class="step-num">03</span><span>Run inference on <strong style="color:var(--accent)">split = "test"</strong> (Jan 27â€“28, 9,446 obs)</span></div>
      <div class="protocol-step"><span class="step-num">04</span><span>Predict: TRACK_GAP, SPARSE_OBJECT, CONJUNCTION, SINGLE_OBS_TRACK, MANEUVER</span></div>
      <div class="protocol-step"><span class="step-num">05</span><span>Score against events.csv â€” metric = <strong style="color:var(--accent2)">F1 per event type</strong></span></div>
      <div class="protocol-step"><span class="step-num">06</span><span>Submit results to the Leaderboard tab</span></div>
    </div>
  </div>
  <div class="panels">
    <div class="panel">
      <div class="panel-title">Observations Sample</div>
      <div style="margin-bottom:0.75rem;display:flex;gap:0.5rem;align-items:center">
        <input class="form-input" style="width:200px" id="obs-search" placeholder="Filter by sat_no..." oninput="filterObsTable()">
        <span style="font-family:'Share Tech Mono',monospace;font-size:0.65rem;color:var(--muted)" id="obs-count"></span>
      </div>
      <div class="data-table-wrap">
        <table class="data-table">
          <thead><tr><th>sat_no</th><th>ob_time</th><th>az</th><th>el</th><th>range_km</th><th>track_id</th><th>split</th></tr></thead>
          <tbody id="obs-tbody"><tr><td colspan="7" class="loading">Loading</td></tr></tbody>
        </table>
      </div>
    </div>
    <div class="panel">
      <div class="panel-title">Events â€” Ground Truth</div>
      <div class="data-table-wrap">
        <table class="data-table">
          <thead><tr><th>sat_no</th><th>event_type</th><th>event_time</th><th>conf</th><th>source</th><th>split</th></tr></thead>
          <tbody id="ev-tbody"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div id="page-leaderboard" class="page">
  <div class="page-header">
    <div><div class="page-subtitle">ALGORITHM COMPARISON â€” F1 SCORE</div><div class="page-title">Leaderboard</div></div>
    <div class="page-meta" id="lb-count">3 SUBMISSIONS</div>
  </div>
  <div class="submit-form">
    <div><label class="form-label">Algorithm Name</label><input class="form-input" id="alg-name" placeholder="e.g. Random Forest v2"></div>
    <div><label class="form-label">Team / Author</label><input class="form-input" id="alg-team" placeholder="e.g. SDA TAP Lab"></div>
    <div><label class="form-label">Overall F1 (0â€“1)</label><input class="form-input" id="alg-f1" placeholder="e.g. 0.72" type="number" min="0" max="1" step="0.01"></div>
    <button class="btn" onclick="submitResult()">Submit</button>
  </div>
  <div class="panel">
    <div class="panel-title">Rankings</div>
    <table class="leaderboard-table"><thead><tr><th>#</th><th>Algorithm</th><th>Team</th><th>F1 Score</th><th>Submitted</th></tr></thead><tbody id="lb-tbody"></tbody></table>
  </div>
  <div class="panels" style="margin-top:1.5rem">
    <div class="panel"><div class="panel-title">F1 by Event Type â€” Baseline vs Best</div><canvas id="f1Chart" height="220"></canvas></div>
    <div class="panel">
      <div class="panel-title">Scoring Guide</div>
      <div class="protocol-box" style="margin:0">
        <div class="protocol-step"><span class="step-num">F1</span><span>Harmonic mean of Precision and Recall per event type. Final = macro average across 5 types.</span></div>
        <div class="protocol-step"><span class="step-num">TP</span><span>Predicted event matches ground truth within Â±30 min for same satellite</span></div>
        <div class="protocol-step"><span class="step-num">FP</span><span>Predicted event with no matching ground truth</span></div>
        <div class="protocol-step"><span class="step-num">FN</span><span>Ground truth event with no matching prediction</span></div>
        <div class="protocol-step"><span class="step-num">BASE</span><span>Baseline = random at observed base rates ~0.12 F1</span></div>
      </div>
    </div>
  </div>
</div>

<script>
let obsData=[];
const SAT_COLORS={39070:'#00d4ff',39504:'#00ff9d',42915:'#a855f7',27566:'#fb923c',22314:'#facc15',23613:'#f472b6',32711:'#60a5fa',40730:'#34d399',24876:'#f87171',19751:'#c084fc',39086:'#ff6b35'};
const EVENT_COLORS={TRACK_GAP:'#00d4ff',SPARSE_OBJECT:'#00ff9d',CONJUNCTION:'#ff6b35',SINGLE_OBS_TRACK:'#ff2d55',MANEUVER:'#ffd700'};
const SAT_COUNTS={39070:10614,39504:5434,42915:3475,27566:1268,22314:1050,23613:468,32711:90,40730:41,24876:5,19751:4,39086:1};
const EVENTS=[
  {sat_no:22314,event_type:'TRACK_GAP',event_time:'2026-01-24T08:14:44Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:32711,event_type:'TRACK_GAP',event_time:'2026-01-24T13:32:57Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:27566,event_type:'TRACK_GAP',event_time:'2026-01-24T18:40:14Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:23613,event_type:'TRACK_GAP',event_time:'2026-01-24T20:29:54Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:39086,event_type:'CONJUNCTION',event_time:'2026-01-24T08:49:05Z',confidence:0.3,source:'UDL',split:'train'},
  {sat_no:39086,event_type:'CONJUNCTION',event_time:'2026-01-24T08:49:05Z',confidence:0.3,source:'UDL',split:'train'},
  {sat_no:39086,event_type:'CONJUNCTION',event_time:'2026-01-24T08:49:05Z',confidence:0.3,source:'UDL',split:'train'},
  {sat_no:32711,event_type:'SPARSE_OBJECT',event_time:'2026-01-24T13:31:39Z',confidence:1.0,source:'COMPUTED',split:'train'},
  {sat_no:19751,event_type:'SPARSE_OBJECT',event_time:'2026-01-24T16:15:56Z',confidence:1.0,source:'COMPUTED',split:'train'},
  {sat_no:42915,event_type:'TRACK_GAP',event_time:'2026-01-25T06:13:47Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:22314,event_type:'TRACK_GAP',event_time:'2026-01-25T08:36:25Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:32711,event_type:'TRACK_GAP',event_time:'2026-01-25T12:58:00Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:39086,event_type:'SINGLE_OBS_TRACK',event_time:'2026-01-25T14:11:13Z',confidence:0.7,source:'COMPUTED',split:'train'},
  {sat_no:27566,event_type:'TRACK_GAP',event_time:'2026-01-25T19:28:30Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:23613,event_type:'TRACK_GAP',event_time:'2026-01-25T19:49:01Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:39086,event_type:'SPARSE_OBJECT',event_time:'2026-01-25T14:11:13Z',confidence:1.0,source:'COMPUTED',split:'train'},
  {sat_no:42915,event_type:'SINGLE_OBS_TRACK',event_time:'2026-01-26T04:17:56Z',confidence:0.7,source:'COMPUTED',split:'train'},
  {sat_no:22314,event_type:'TRACK_GAP',event_time:'2026-01-26T07:19:35Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:32711,event_type:'TRACK_GAP',event_time:'2026-01-26T13:17:53Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:23613,event_type:'TRACK_GAP',event_time:'2026-01-26T20:08:04Z',confidence:0.6,source:'COMPUTED',split:'train'},
  {sat_no:27566,event_type:'TRACK_GAP',event_time:'2026-01-27T02:51:00Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:22314,event_type:'TRACK_GAP',event_time:'2026-01-27T08:01:03Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:40730,event_type:'TRACK_GAP',event_time:'2026-01-27T08:37:41Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:32711,event_type:'TRACK_GAP',event_time:'2026-01-27T12:57:58Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:23613,event_type:'TRACK_GAP',event_time:'2026-01-27T20:19:57Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:27566,event_type:'TRACK_GAP',event_time:'2026-01-27T21:56:13Z',confidence:0.6,source:'COMPUTED',split:'test'},
  {sat_no:24876,event_type:'SPARSE_OBJECT',event_time:'2026-01-27T02:28:20Z',confidence:1.0,source:'COMPUTED',split:'test'},
  {sat_no:40730,event_type:'SPARSE_OBJECT',event_time:'2026-01-27T08:27:34Z',confidence:1.0,source:'COMPUTED',split:'test'},
  {sat_no:39504,event_type:'MANEUVER',event_time:'2026-01-28T05:02:56Z',confidence:0.95,source:'COMPUTED',split:'test'},
  {sat_no:39504,event_type:'TRACK_GAP',event_time:'2026-01-28T09:09:35Z',confidence:0.6,source:'COMPUTED',split:'test'},
];
let leaderboard=[
  {name:'Random Baseline',team:'SDA TAP Lab',f1:0.12,date:'2026-01-28'},
  {name:'Threshold Detector',team:'SDA TAP Lab',f1:0.41,date:'2026-02-01'},
  {name:'LSTM Sequence Model',team:'SpOC Research',f1:0.58,date:'2026-02-10'},
];
function showPage(n){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('page-'+n).classList.add('active');
  document.querySelectorAll('.nav-tab').forEach(t=>{if(t.textContent.toLowerCase().includes(n.split('-')[0]))t.classList.add('active')});
  if(n==='skymap'&&obsData.length>0)renderSkyMap();
  if(n==='leaderboard')renderLeaderboard();
}
function updateClock(){document.getElementById('live-time').textContent=new Date().toUTCString().replace('GMT','UTC')}
setInterval(updateClock,1000);updateClock();
function initCharts(){
  const defs={plugins:{legend:{labels:{color:'#4a6a85',font:{family:'Share Tech Mono',size:10}}}},scales:{x:{ticks:{color:'#4a6a85',font:{family:'Share Tech Mono',size:9}},grid:{color:'#0e2035'}},y:{ticks:{color:'#4a6a85',font:{family:'Share Tech Mono',size:9}},grid:{color:'#0e2035'}}}};
  const evC={};EVENTS.forEach(e=>{evC[e.event_type]=(evC[e.event_type]||0)+1});
  new Chart(document.getElementById('eventChart'),{type:'bar',data:{labels:Object.keys(evC),datasets:[{data:Object.values(evC),backgroundColor:Object.keys(evC).map(k=>EVENT_COLORS[k]+'33'),borderColor:Object.keys(evC).map(k=>EVENT_COLORS[k]),borderWidth:1}]},options:{...defs,plugins:{legend:{display:false}}}});
  const sats=Object.keys(SAT_COUNTS);
  new Chart(document.getElementById('satChart'),{type:'bar',data:{labels:sats.map(s=>'SAT '+s),datasets:[{data:Object.values(SAT_COUNTS),backgroundColor:sats.map(s=>(SAT_COLORS[s]||'#00d4ff')+'33'),borderColor:sats.map(s=>SAT_COLORS[s]||'#00d4ff'),borderWidth:1}]},options:{...defs,plugins:{legend:{display:false}},scales:{...defs.scales,y:{...defs.scales.y,type:'logarithmic'}}}});
  new Chart(document.getElementById('splitChart'),{type:'doughnut',data:{labels:['Train','Test'],datasets:[{data:[13004,9446],backgroundColor:['rgba(0,212,255,0.3)','rgba(0,255,157,0.3)'],borderColor:['#00d4ff','#00ff9d'],borderWidth:2}]},options:{plugins:{legend:{labels:{color:'#4a6a85',font:{family:'Share Tech Mono',size:10}}}},cutout:'65%'}});
  const se={};EVENTS.forEach(e=>{se[e.sat_no]=(se[e.sat_no]||0)+1});const sk=Object.keys(se);
  new Chart(document.getElementById('coverageChart'),{type:'bar',data:{labels:sk.map(s=>'SAT '+s),datasets:[{data:Object.values(se),backgroundColor:sk.map(s=>(SAT_COLORS[s]||'#00d4ff')+'44'),borderColor:sk.map(s=>SAT_COLORS[s]||'#00d4ff'),borderWidth:1}]},options:{...defs,plugins:{legend:{display:false}}}});
  const list=document.getElementById('event-list-dash');list.innerHTML='';
  EVENTS.slice(0,12).forEach(e=>{const d=document.createElement('div');d.className='event-row';d.innerHTML=`<span class="event-type et-${e.event_type}">${e.event_type.replace('_',' ')}</span><span class="event-sat">SAT ${e.sat_no}</span><span class="event-time">${e.event_time.replace('T',' ').replace('Z','')}</span><span class="event-conf">${e.confidence.toFixed(2)}</span><span class="split-${e.split}">${e.split.toUpperCase()}</span>`;list.appendChild(d)});
}
function renderSkyMap(){
  const canvas=document.getElementById('skyCanvas');const ctx=canvas.getContext('2d');
  const satSel=document.getElementById('sat-select').value;const coordSel=document.getElementById('coord-select').value;const splitSel=document.getElementById('split-select').value;
  const W=canvas.parentElement.clientWidth-2;const H=Math.min(W*0.55,500);canvas.width=W;canvas.height=H;
  ctx.fillStyle='#040a0f';ctx.fillRect(0,0,W,H);
  ctx.strokeStyle='#0e2035';ctx.lineWidth=1;
  for(let x=0;x<W;x+=60){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,H);ctx.stroke()}
  for(let y=0;y<H;y+=60){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke()}
  if(obsData.length===0){ctx.fillStyle='#4a6a85';ctx.font='12px Share Tech Mono';ctx.fillText('Loading observation data...',W/2-100,H/2);return}
  let pts=obsData;
  if(satSel!=='all')pts=pts.filter(d=>String(d.sat_no)===satSel);
  if(splitSel!=='all')pts=pts.filter(d=>d.split===splitSel);
  document.getElementById('point-count').textContent=pts.length.toLocaleString()+' OBSERVATIONS';
  const xF=coordSel==='azel'?'az':'ra';const yF=coordSel==='azel'?'el':'dec';
  const xMin=0;const xMax=360;const yMin=coordSel==='azel'?0:-90;const yMax=coordSel==='azel'?90:90;
  const pad={l:50,r:20,t:20,b:40};const cW=W-pad.l-pad.r;const cH=H-pad.t-pad.b;
  const toX=v=>pad.l+(v-xMin)/(xMax-xMin)*cW;const toY=v=>pad.t+cH-(v-yMin)/(yMax-yMin)*cH;
  ctx.strokeStyle='#0e2a40';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(pad.l,pad.t);ctx.lineTo(pad.l,H-pad.b);ctx.lineTo(W-pad.r,H-pad.b);ctx.stroke();
  [0,90,180,270,360].forEach(v=>{const x=toX(v);ctx.fillStyle='#4a6a85';ctx.font='8px Share Tech Mono';ctx.fillText(v+'Â°',x-8,H-pad.b+12)});
  const sample=pts.length>5000?pts.filter((_,i)=>i%Math.ceil(pts.length/5000)===0):pts;
  sample.forEach(d=>{
    const xv=parseFloat(d[xF]);const yv=parseFloat(d[yF]);if(isNaN(xv)||isNaN(yv))return;
    const px=toX(xv);const py=toY(yv);if(px<pad.l||px>W-pad.r||py<pad.t||py>H-pad.b)return;
    const color=SAT_COLORS[d.sat_no]||'#00d4ff';ctx.fillStyle=d.split==='train'?color+'aa':color+'66';
    ctx.beginPath();ctx.arc(px,py,1.5,0,Math.PI*2);ctx.fill();
  });
  EVENTS.forEach(e=>{
    if(satSel!=='all'&&String(e.sat_no)!==satSel)return;
    if(splitSel!=='all'&&e.split!==splitSel)return;
    const evTime=new Date(e.event_time).getTime();
    const near=pts.filter(d=>String(d.sat_no)===String(e.sat_no)&&Math.abs(new Date(d.ob_time).getTime()-evTime)<30*60*1000);
    if(near.length>0){
      const d=near[0];const xv=parseFloat(d[xF]);const yv=parseFloat(d[yF]);
      if(!isNaN(xv)&&!isNaN(yv)){const px=toX(xv);const py=toY(yv);const ec=EVENT_COLORS[e.event_type]||'#fff';ctx.strokeStyle=ec;ctx.lineWidth=1.5;ctx.beginPath();ctx.arc(px,py,6,0,Math.PI*2);ctx.stroke();ctx.fillStyle=ec+'44';ctx.fill()}
    }
  });
  document.getElementById('sky-info').textContent=(satSel!=='all'?'SAT '+satSel:'ALL SATELLITES')+' â€” '+pts.length.toLocaleString()+' OBS';
}
function populateEvTable(){
  const tbody=document.getElementById('ev-tbody');tbody.innerHTML='';
  EVENTS.forEach(e=>{const tr=document.createElement('tr');tr.innerHTML=`<td style="color:${SAT_COLORS[e.sat_no]||'#fff'}">${e.sat_no}</td><td><span class="event-type et-${e.event_type}" style="font-size:0.58rem;padding:1px 5px">${e.event_type.replace('_',' ')}</span></td><td>${e.event_time.replace('T',' ').replace('Z','')}</td><td>${e.confidence.toFixed(2)}</td><td style="color:var(--muted)">${e.source}</td><td><span class="split-${e.split}">${e.split}</span></td>`;tbody.appendChild(tr)});
}
function populateObsTable(data){
  const tbody=document.getElementById('obs-tbody');const rows=data.slice(0,200);tbody.innerHTML='';
  rows.forEach(d=>{const tr=document.createElement('tr');tr.innerHTML=`<td style="color:${SAT_COLORS[d.sat_no]||'#fff'}">${d.sat_no}</td><td style="color:var(--muted)">${String(d.ob_time).substring(0,19)}</td><td>${parseFloat(d.az||0).toFixed(1)}Â°</td><td>${parseFloat(d.el||0).toFixed(1)}Â°</td><td>${parseFloat(d.range_km||0).toFixed(0)} km</td><td style="color:var(--muted);font-size:0.6rem">${d.track_id}</td><td><span class="split-${d.split}">${d.split}</span></td>`;tbody.appendChild(tr)});
  document.getElementById('obs-count').textContent='showing '+rows.length+' of '+data.length.toLocaleString();
}
function filterObsTable(){const q=document.getElementById('obs-search').value.trim();populateObsTable(q?obsData.filter(d=>String(d.sat_no).includes(q)):obsData)}
function renderLeaderboard(){
  const sorted=[...leaderboard].sort((a,b)=>b.f1-a.f1);const tbody=document.getElementById('lb-tbody');tbody.innerHTML='';
  sorted.forEach((r,i)=>{const rank=i+1;const cls=rank<=3?'rank-'+rank:'';const medal=rank===1?'ðŸ¥‡':rank===2?'ðŸ¥ˆ':rank===3?'ðŸ¥‰':rank;const tr=document.createElement('tr');tr.innerHTML=`<td class="${cls}">${medal}</td><td style="color:#fff;font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:0.9rem">${r.name}</td><td style="color:var(--muted)">${r.team}</td><td><span style="color:var(--accent2);font-weight:700">${r.f1.toFixed(3)}</span><span class="score-bar-wrap"><span class="score-bar" style="width:${r.f1*100}%"></span></span></td><td style="color:var(--muted)">${r.date}</td>`;tbody.appendChild(tr)});
  document.getElementById('lb-count').textContent=leaderboard.length+' SUBMISSIONS';
  const ctx=document.getElementById('f1Chart');if(ctx._ci)ctx._ci.destroy();
  ctx._ci=new Chart(ctx,{type:'bar',data:{labels:['TRACK_GAP','SPARSE\nOBJECT','CONJUNCTION','SINGLE\nOBS','MANEUVER'],datasets:[{label:'Baseline',data:[0.18,0.08,0.05,0.06,0.03],backgroundColor:'rgba(74,106,133,0.3)',borderColor:'#4a6a85',borderWidth:1},{label:'Best',data:[0.72,0.61,0.44,0.55,0.38],backgroundColor:'rgba(0,255,157,0.2)',borderColor:'#00ff9d',borderWidth:1}]},options:{plugins:{legend:{labels:{color:'#4a6a85',font:{family:'Share Tech Mono',size:9}}}},scales:{x:{ticks:{color:'#4a6a85',font:{family:'Share Tech Mono',size:8}},grid:{color:'#0e2035'}},y:{ticks:{color:'#4a6a85',font:{family:'Share Tech Mono',size:9}},grid:{color:'#0e2035'},max:1.0}}}});
}
function submitResult(){
  const name=document.getElementById('alg-name').value.trim();const team=document.getElementById('alg-team').value.trim();const f1=parseFloat(document.getElementById('alg-f1').value);
  if(!name||!team||isNaN(f1)||f1<0||f1>1){alert('Fill all fields. F1 must be 0â€“1.');return}
  leaderboard.push({name,team,f1,date:new Date().toISOString().substring(0,10)});
  document.getElementById('alg-name').value='';document.getElementById('alg-team').value='';document.getElementById('alg-f1').value='';
  renderLeaderboard();
}
window.addEventListener('load',()=>{
  initCharts();populateEvTable();renderLeaderboard();
  Papa.parse('https://raw.githubusercontent.com/pmwanza-zm/Nmwanza/master/benchmark/observations.csv',{
    download:true,header:true,dynamicTyping:true,skipEmptyLines:true,
    complete:function(r){obsData=r.data;populateObsTable(obsData);renderSkyMap()},
    error:function(){populateObsTable([])}
  });
});
window.addEventListener('resize',()=>{if(document.getElementById('page-skymap').classList.contains('active'))renderSkyMap()});
</script>
</body>
</html>